<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
        In testing, a spy function is one that keeps track of various metadata regarding its invocations. 
        Some examples of properties that a spy might track include:
        
        Whether it was invoked
        How many times it was invoked
        What arguments it was called with
        What contexts it was called in
        What values it returned
        Whether it threw an error
        
        
        */
        function adderSpy2(a,b){
            return a + b
        }
       
        function spyOn(func) {
            
            let callCount = 0;
            let wasCalledWith = [];
            let returned = [];
            
            wrapper.callCount = () => callCount;
            wrapper.wasCalledWith = (arg) => wasCalledWith.includes(arg);
            wrapper.returned = (arg) => returned.includes(arg);
            
            function wrapper(){
                var x = func.apply(0,arguments);
                callCount++;
                wasCalledWith.push(...arguments);
                returned.push(x);
                return x
            }
            return wrapper
        }
        var spy = spyOn(adderSpy2);
       
        
        console.log(spy(1,2))
        console.log(spy(5,3))
        //console.log(spy.allCount())
        
       
    </script>

</body>
</html>
