<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // Your task is to write a higher order function for chaining together a list of unary functions.
        // In other words, it should return a function that does a left fold on the given functions.
        
        //Ваша задача - написать функцию более высокого порядка для объединения в цепочку списка унарных функций.
        //Другими словами, он должен возвращать функцию, которая выполняет левую складку для заданных функций.
        
        // chained([a,b,c,d])(input)
        // d(c(b(a(input))))

function f1(x){ return x*2 }
function f2(x){ return x+2 }
function f3(x){ return Math.pow(x,2) }

function f4(x){ return x.split("").concat().reverse().join("").split(" ")}
function f5(xs){ return xs.concat().reverse() }
function f6(xs){ return xs.join("_") }

// Test.assertEquals( chained([f1,f2,f3])(0), 4 )
// Test.assertEquals( chained([f1,f2,f3])(2), 36 )
// Test.assertEquals( chained([f3,f2,f1])(2), 12 )

// Test.assertEquals(chained([f4,f5,f6])("lorem ipsum"), "merol_muspi")


function chained1(functions) {//function - arr
    //return functions.map(v => v+=v);
    //return functions.reduce((sum,val) => {sum += val;return sum},0);
    return x => functions.reduce((sum,val,i) => {if(i>0)x = sum; sum = val(x); return sum},0);
}
function chained2(functions) {//function - arr
   return function(x) {
        let sum = 0
        for(let i = 0; i < functions.length;i++){
            sum = functions[i](x);
            console.log(sum);
            x = sum;
   };
   return sum;
    };////13131322222222222
}
console.log(chained1([f1,f2,f3])(2))
console.log(`ch2 ${chained2([f1,f2,f3])(2)}`)
    </script>
</body>
</html>
